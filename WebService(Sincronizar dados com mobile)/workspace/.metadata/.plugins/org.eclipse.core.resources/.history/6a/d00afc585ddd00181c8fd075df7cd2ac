<%--
    Document   : Seleciona Registros
    Created on : 13/03/2015, 13:05:02
    Author     : Alberti
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ page import="classeConexao.*"%>
<%@ page import="java.sql.*"%>
<%
   	Conexao conexao = new Conexao();
   	int registros = 0;
	// Comando SQL, que ira realizar o Insert no banco de dados.
    String query =	"INSERT INTO Ocorrencia (acontecimento, hora_data_registro, _status, nivel_ocorrencia," + 
    		" data_acontecimento, hora_do_termino, hora_de_inicio, id_area, id_func) " + 
    				"VALUES ('" + 
   					request.getParameter("acontecimento") + "','" +
   					request.getParameter("hora_data_registro") + "','" +
   					request.getParameter("_status") + "','" +
   		   			request.getParameter("nivel_ocorrencia") + "','" +
   		   			request.getParameter("data_acontecimento") + "','" +
   	   				request.getParameter("hora_do_termino") + "','" +
   	   				request.getParameter("hora_de_inicio") + "','" +
   	   		   		request.getParameter("id_area") + "','" +
   					request.getParameter("id_func") + "')";
        try{
        	//Executando o comando (query) SQL.
        	ResultSet dados = conexao.ponte.executeQuery(query);
            //Caso insira sem erros, sera exibido na tela a letra:
            // - "Y" de YES (SIM), caso contrario
            // - "N" de NO  (NÃƒO).
            int inseriu = conexao.ponte.getUpdateCount();
            System.err.print("Status: "+inseriu);
            if (inseriu >= 1)
                out.println("Y");
            else
            	out.println("N");
        }
        catch(Exception erro){
             System.err.print("Erro ao Gravar "+erro);
        }
%>